	public Canvas getViewPanel() {
		VLayout layout = new VLayout();
		layout.setWidth100();
		layout.setHeight100();

		// Map with ID osmMap is defined in the XML configuration. (mapOsm.xml)
		final MapWidget map = new MapWidget("osmMap", "gwt-samples");
		map.addDrawHandler(new DrawHandler() {

			public void onDraw(DrawEvent event) {
				map.initialize();
			}
		});

		// Set a panning controller on the map:
		map.setController(new PanController(map));
		layout.addMember(map);

		Button butSwitch = new Button(I18nProvider.getSampleMessages().switchUnitTypes());
		butSwitch.setWidth100();
		layout.addMember(butSwitch);

		butSwitch.addClickHandler(new ClickHandler() {

			public void onClick(ClickEvent event) {

				if (map.getMapModel().getMapInfo().getDisplayUnitType() == UnitType.METRIC) {
					SC.say("Current unit: " + map.getMapModel().getMapInfo().getDisplayUnitType()
							+ "<BR>Switching to ENGLISH");
					map.getMapModel().getMapInfo().setDisplayUnitType(UnitType.ENGLISH); // set English
				} else {
					SC.say("Current unit: " + map.getMapModel().getMapInfo().getDisplayUnitType()
							+ "<BR>Switching to METRIC");
					map.getMapModel().getMapInfo().setDisplayUnitType(UnitType.METRIC); // set English
				}
				map.setScalebarEnabled(false); //force an update of the scalebar...
				map.setScalebarEnabled(true); //force an update of the scalebar
			}
		});

		return layout;
	}