<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ This is part of Geomajas, a GIS framework, http://www.geomajas.org/.
  ~
  ~ Copyright 2008-2011 Geosparc nv, http://www.geosparc.com/, Belgium.
  ~
  ~ The program is available in open source according to the GNU Affero
  ~ General Public License. All contributions in this program are covered
  ~ by the Geomajas Contributors License Agreement. For full licensing
  ~ details, see LICENSE.txt in the project root.
  -->
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<chapter id="chapter-configuration">
  <title>Configuration</title>

  <para>The configuration of staticsecurity involves the following
  elements:</para>

  <para><itemizedlist>
      <listitem>
        <para>configure the use of staticsecurity as security service.</para>
      </listitem>

      <listitem>
        <para>configure the way to access the users.</para>
      </listitem>

      <listitem>
        <para>configure the policies to use.</para>
      </listitem>
    </itemizedlist></para>

  <section id="dependencies">
    <title>Dependencies</title>

    <para>Make sure you include the correct version of the plug-in in your
    project. This can be done either by including a reference to geomajas-dep
    or the following excerpt (with the correct version) in the
    dependencyManagement section of your project:</para>

    <informalexample>
      <programlisting>&lt;dependency&gt;
    &lt;groupId&gt;org.geomajas.plugin&lt;/groupId&gt;
    &lt;artifactId&gt;geomajas-plugin-staticsecurity-all&lt;/artifactId&gt;
    &lt;version&gt;1.9.0&lt;/version&gt;
    &lt;type&gt;pom&lt;/type&gt;
    &lt;scope&gt;import&lt;/scope&gt;
&lt;/dependency&gt;
  </programlisting>
    </informalexample>

    <para>If you are using geomajas-dep, this includes the latest version of
    the staticsecurity plug-in (at the time of publishing of that version). If
    you want to overwrite the staticsecurity plug-in version, make sure to
    include this excerpt <emphasis>before</emphasis> the geomajas-dep
    dependency.</para>

    <para>You can now include the actual dependency without explicit version.
    You will probably need the dependency for the face you are using. In case
    of the GWT face, this is:</para>

    <informalexample>
      <programlisting>&lt;dependency&gt;
    &lt;groupId&gt;org.geomajas.plugin&lt;/groupId&gt;
    &lt;artifactId&gt;geomajas-plugin-staticsecurity-gwt&lt;/artifactId&gt;
&lt;/dependency&gt;</programlisting>
    </informalexample>

    <para>If there is no specific module for the face you are using, you
    should include the core module:</para>

    <informalexample>
      <programlisting>&lt;dependency&gt;
    &lt;groupId&gt;org.geomajas.plugin&lt;/groupId&gt;
    &lt;artifactId&gt;geomajas-plugin-staticsecurity&lt;/artifactId&gt;
&lt;/dependency&gt;</programlisting>
    </informalexample>
  </section>

  <section>
    <title>Use staticsecurity security service</title>

    <para>To enable the use of the staticsecurity security service, you have
    to replace the "security.securityInfo" bean with your own version. When
    such a bean is not defined, nobody is allowed to do anything.</para>

    <xi:include href="listing/UseStaticsecurity.xml"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <para>The configuration actually defines two services. The second
    (LoginAllowedSecurityService) assures that everybody is allowed access to
    the login command which is provided by the plug-in. </para>

    <para>The actual staticsecurity security service requires you to define a
    bean of the class
    org.geomajas.plugin.staticsecurity.configuration.SecurityServiceInfo to be
    defined in your application context. All configuration is read from that
    bean. Details are given in the following sections.</para>
  </section>

  <section>
    <title>Configure users</title>

    <para></para>
  </section>

  <section>
    <title>Configure policies</title>

    <para></para>
  </section>
</chapter>
